"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8489],{8489:function(e,t,l){l.d(t,{Z:function(){return _}});var a=l(1527),n=l(2349),o=l(4402),s=l(959),i=l(8810),r=l(4221),d=l(6450),c=l(34),p=l(3944),x=e=>{var t,l,n,s,d,c,x,u;let{shop:m,loading:h,onClick:v}=e,{i18n:g,t:f}=(0,o.$G)();return h?(0,a.jsxs)("div",{className:"rounded-[16px] border border-solid border-shop-border p-[16px] flex gap-[12px]  items-start  w-full cursor-wait",children:[(0,a.jsx)(p.Z,{iconName:"list_location",className:"w-[24px] h-[24px]"}),(0,a.jsxs)("div",{className:"flex flex-col gap-[8px] items-start w-full",children:[(0,a.jsx)(r.default,{type:"flexable",className:"w-[450px] h-[18px]"}),(0,a.jsx)(r.default,{type:"flexable",className:"w-[300px] h-[14px]"}),(0,a.jsx)(r.default,{type:"flexable",className:"w-[200px] h-[12px]"})]})]}):(0,a.jsxs)("div",{className:"py-[16px] grid grid-col-3 tablet:grid-cols-7 gap-x-[24px] tablet:gap-x-[20px] laptopM:gap-x-[41px] gap-y-[12px] items-center border-t border-solid border-shop-border cursor-pointer",children:[(0,a.jsxs)("div",{className:"col-span-3 flex gap-[12px] stroke-gray",children:[(0,a.jsx)(p.Z,{iconName:"location",className:"w-full h-full max-w-[24px] max-h-[24px]"}),(0,a.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,a.jsx)("p",{className:"text-dark text-[14px] font-[700] leading-[150%]",children:null==m?void 0:null===(t=m.name)||void 0===t?void 0:t[g.language]}),(0,a.jsx)("p",{className:"text-gray text-[14px] font-[400] leading-[150%]",children:null==m?void 0:null===(l=m.location)||void 0===l?void 0:l[g.language]})]})]}),(0,a.jsx)("div",{className:"col-span-1 tablet:col-span-2 laptopM:col-span-1",children:(0,a.jsxs)("div",{className:"text-dark text-[14px] leading-[150%] font-[500]",children:[f("shops.days")," ",(0,a.jsx)("br",{})," ",null==m?void 0:m.daily_start_time,"-",null==m?void 0:m.daily_end_time]})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)("div",{className:"p-[4px] rounded-[8px] border border-solid border-stroke laptopM:min-w-[98px] min-w-[98px] tablte:min-w-full",children:(0,a.jsxs)("div",{className:"rounded-[4px] py-[3px] text-center text-[12px] font-[700] text-light relative",children:[(0,a.jsx)("div",{className:"h-full absolute top-0 left-0 rounded-[4px] z-[-1] ".concat((null==m?void 0:null===(n=m.quantity_language)||void 0===n?void 0:n.ru)==="достаточно"?"w-[73.33%] bg-[#FFA755]":(null==m?void 0:null===(s=m.quantity_language)||void 0===s?void 0:s.ru)==="Мало"?"w-[33.33%] bg-red-primary":(null==m?void 0:null===(d=m.quantity_language)||void 0===d?void 0:d.ru)==="Много"?"w-full bg-success":(null==m||null===(c=m.quantity_language)||void 0===c||c.ru,"w-0"))}),(0,a.jsx)("span",{className:"z-10 capitalize ".concat((null==m?void 0:null===(x=m.quantity_language)||void 0===x?void 0:x.ru)==="Много"?"text-light":"text-dark"),children:null==m?void 0:null===(u=m.quantity_language)||void 0===u?void 0:u[g.language]})]})})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)("div",{className:"text-dark text-[14px] font-[500]",children:f("shops.today")})}),(0,a.jsx)("div",{className:"col-span-2 tablet:col-span-1",children:(0,a.jsx)(i.default,{type:"button",buttonType:"danger","aria-label":"Купить",className:"py-[14px] tablet:px-[79px] laptopM:px-[26px] rounded-[12px] text-[14px] font-[600] text-light px-auto w-full tablet:w-auto",onClick:()=>v(m),children:f("shops.buy")})})]})};let u="!py-[10px] !px-[16px] rounded-[12px] border border-solid border-stroke text-dark font-[500] text-[14px] hover:text-red-primary hover:border-red-primary";var m=e=>{let{setLocation:t,setFilter:l}=e,{t:n}=(0,o.$G)(),[r,d]=(0,s.useState)(null);return(0,a.jsxs)("div",{className:"flex items-center gap-[12px] mb-[24px]",children:[(0,a.jsx)(i.default,{type:"button",buttonType:"simple",className:"".concat(u," ").concat(0===r&&"!border-red-primary text-red-primary"),"aria-label":n("shops.near"),onClick:()=>{navigator.geolocation?(navigator.geolocation.getCurrentPosition(e=>{let{latitude:l,longitude:a}=e.coords;t({latitude:l,longitude:a})},e=>{console.error("Error getting location:",e)}),d(0),l(null)):console.error("Geolocation is not supported by your browser")},children:n("shops.near")}),(0,a.jsx)(i.default,{type:"button",buttonType:"simple",className:"".concat(u," ").concat(1===r&&"!border-red-primary text-red-primary"),"aria-label":n("shops.today"),onClick:()=>{d(1),l({is_now_open:!1,is_today:!0}),t(null)},children:n("shops.today")}),(0,a.jsx)(i.default,{type:"button",buttonType:"simple",className:"".concat(u," ").concat(2===r&&"!border-red-primary text-red-primary"),"aria-label":n("shops.nowOpen"),onClick:()=>{d(2),l({is_now_open:!0,is_today:!1}),t(null)},children:n("shops.nowOpen")})]})},h=l(6169),v=l(9070),g=e=>{let{shops:t}=e,{i18n:l}=(0,o.$G)(),n=e=>{switch(e){case"много":return"text-[#36B82C]";case"достаточна":return"text-[#0b2b5e]";default:return"text-[#d92e15]"}};return(0,a.jsx)(h.Yy,{preload:!0,query:{apikey:v.env.NEXT_PUBLIC_YANDEX_MAPS_API_KEY,lang:"ru_RU",load:"package.full"},children:(0,a.jsx)("div",{className:"rounded-[16px] overflow-hidden h-[408px]",children:(0,a.jsx)(h.D5,{defaultState:{center:[41.32,69.24],zoom:14},state:{center:[41.32,69.24],zoom:14,controls:["zoomControl"]},width:"100%",height:"100%",children:(0,a.jsx)(h.LA,{options:{groupByCoordinates:!1,clusterIconColor:"#D92E15"},children:null==t?void 0:t.map((e,t)=>{var o;return(0,a.jsx)(h.ah,{geometry:[null==e?void 0:e.latitude,null==e?void 0:e.longitude],properties:{balloonContentBody:'\n                  <div class="py-[4px] pl-[4px] flex flex-col gap-[6px]">\n                    <p class="font-[600] text-[12px] leading-[150%] text-dark">'.concat(null==e?void 0:null===(o=e.name)||void 0===o?void 0:o[l.language],"</p>\n                    <p class='text-[12px] font-[400] capitalize ").concat(n(null==e?void 0:e.quantity),"'>").concat(null==e?void 0:e.quantity,'</p>\n                    <p class="text-[12px] font-[400] text-gray">').concat(null==e?void 0:e.daily_start_time," - ").concat(null==e?void 0:e.daily_end_time,"</p>\n                  </div>")},options:{iconLayout:"default#image",iconImageHref:"/images/location_pin.svg",iconImageSize:[24,24]}},t)})})})})})},f=l(5467),y=l(1043),b=l(6502),j=l(6988),N=l(2390),_=e=>{var t,l;let{more:u,loading:h}=e,v=(0,n.useRouter)(),{t:_,i18n:w}=(0,o.$G)(),{open:k,setOpen:S}=(0,f.Z)(),{location:C}=(0,y.Dj)(),{branches:Z,data:M,setBranches:T}=(0,j.A)(),[E,q]=(0,s.useState)(!0),[I,z]=(0,s.useState)(""),[A,F]=(0,s.useState)(null),[O,D]=(0,s.useState)(null),G=(0,b.Z)(I,700);(0,s.useEffect)(()=>{let e=async()=>{let e=await N.product_service.getProductBranches(String(null==M?void 0:M.num_id),"?region_id=".concat(null==C?void 0:C.id,"&search=").concat(G,"&lat=").concat((null==A?void 0:A.latitude)||"","&long=").concat((null==A?void 0:A.longitude)||"","&is_today=").concat((null==O?void 0:O.is_today)||"","&is_open_now=").concat((null==O?void 0:O.is_now_open)||""));null==T||T(null==e?void 0:e.product_branchs)};h||e()},[G,null==M?void 0:M.num_id,h,A,null==O?void 0:O.is_today,null==O?void 0:O.is_now_open,T,null==C?void 0:C.id]);let P=(0,s.useMemo)(()=>Z,[Z]),B=e=>{var t,l,a;let n={...M,image:null==M?void 0:null===(l=M.photos)||void 0===l?void 0:null===(t=l.at(0))||void 0===t?void 0:t.url,count:1,checked:!0,actual_price:null==M?void 0:M.price_after_discount,core_price:null==M?void 0:null===(a=M.price)||void 0===a?void 0:a.bottom_price};localStorage.setItem("products",JSON.stringify([n])),v.push("/checkout?branch_id=".concat(null==e?void 0:e.id,"&region=").concat(JSON.stringify(e.location)))};return h?(0,a.jsxs)("div",{children:[(0,a.jsx)(r.default,{type:"productSingle",className:"w-[180px] h-[20px] rounded-[6px]"}),(0,a.jsx)(r.default,{type:"productSingle",className:"w-[full] h-[100px] mt-[20px] rounded-[6px]"}),(0,a.jsxs)("div",{className:"mt-[20px] flex items-center justify-end",children:[(0,a.jsx)(r.default,{type:"productSingle",className:"w-[18%] h-[44px] mt-[3px] mr-[6px] rounded-[6px]"}),(0,a.jsx)(r.default,{type:"productSingle",className:"w-[18%] h-[44px] mt-[3px] rounded-[6px]"})]}),(0,a.jsx)(r.default,{type:"productSingle",className:"w-[110px] h-[20px] rounded-[6px] mt-[54px]"})]}):(0,a.jsxs)("div",{children:[k&&(0,a.jsx)(c.default,{open:k,setOpen:S,setAksModal:S}),(0,a.jsxs)("div",{className:"flex items-center gap-[16px] mb-4",children:[(0,a.jsx)("h3",{className:"text-dark font-bold tablet:text-[24px] mobileS:text-[18px]",children:_("products.product_inner.store")}),(0,a.jsxs)(i.default,{type:"button",buttonType:"default","aria-label":"region",className:"!stroke-blue-primary py-[6px] px-[12px] flex items-center gap-[6px] rounded-[8px] text-[14px] text-blue-primary font-[400]",onClick:()=>{S(!0)},children:[(0,a.jsx)(p.Z,{iconName:"location",className:"w-[16px] h-[16px]"}),null==C?void 0:null===(t=C.name)||void 0===t?void 0:t[w.language]]})]}),(0,a.jsx)("p",{className:"tablet:text-[16px] text-gray font-normal mb-6 leading-[150%] mobileS:text-[14px]",children:_("products.product_inner.text")}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-[16px] mt-[10px] w-full",children:[(0,a.jsxs)("div",{className:"p-[14px] flex items-center stroke-gray rounded-[14px] border border-solid border-stroke gap-[12px] w-full tablet:w-[450px]",children:[(0,a.jsx)(p.Z,{iconName:"search",className:"w-[24px] h-[24px]"}),(0,a.jsx)("input",{type:"text",className:"text-gray text-[14px] font-[500] h-full w-full",value:I,onChange:e=>z(e.target.value),placeholder:_("shops.branch_search")})]}),(0,a.jsxs)("div",{className:"flex items-center  gap-[5px] bg-[#F6F6F7] rounded-[14px] tablet:ml-0 mobileS:ml-[10px] tablet:p-[4px] mobileS:px-[2px]",children:[(0,a.jsx)(i.default,{type:"button",className:" flex items-center justify-center rounded-[10px] w-[44px] h-[44px] p-0 stroke-dark ".concat(E&&"bg-light"),onClick:()=>q(!0),children:(0,a.jsx)(p.Z,{iconName:"mode_list",className:"w-[18px] h-[18px]"})}),(0,a.jsx)(i.default,{type:"button",className:" flex items-center justify-center rounded-[10px] w-[44px] h-[44px]  p-0 stroke-gray fill-none ".concat(!E&&"bg-light !stroke-dark"),onClick:()=>q(!1),children:(0,a.jsx)(p.Z,{iconName:"location_map",className:"w-[18px] h-[18px]"})})]})]}),(0,a.jsxs)(d.Z,{status:null===M||(null==P?void 0:P.length)?"success":"nodata",noData:{mainHeight:159,navigateLink:"/",title:_("shops.noProduct"),btnText:"Назад",icon:"package_search",text:"",height:"auto",className:"py-[49px]"},className:"min-h-auto",loading:null===M,children:[(0,a.jsx)(m,{setLocation:F,setFilter:D}),E?(0,a.jsxs)("div",{className:"flex flex-col gap-[24px]",children:[(0,a.jsxs)("div",{className:"hidden tablet:grid grid-cols-7 gap-x-[20px] laptopM:gap-x-[41px]",children:[(0,a.jsx)("div",{className:"col-span-3 text-[14px] text-gray font-[500]",children:_("shops.shop")}),(0,a.jsx)("div",{className:"col-span-2 laptopM:col-span-1 text-[14px] text-gray font-[500]",children:_("shops.workTime")}),(0,a.jsx)("div",{className:"text-[14px] text-gray font-[500]",children:_("shops.present")}),(0,a.jsx)("div",{className:"text-[14px] text-gray font-[500]",children:_("shops.pickup")}),(0,a.jsx)("div",{className:"hidden laptopM:block text-[14px] text-gray font-[500]",children:_("shops.action")})]}),(0,a.jsx)("div",{children:null==P?void 0:null===(l=P.slice(0,u?5:void 0))||void 0===l?void 0:l.map((e,t)=>(0,a.jsx)(x,{shop:e,onClick:B},t))})]}):(0,a.jsx)(g,{shops:P||[]}),u&&(0,a.jsx)(i.default,{type:"button",className:"gap-[7px] text-blue-primary text-[14px] font-[500] hover:underline !p-0 stroke-blue-primary mt-[24px]",onClick:()=>{v.push("/products/view/".concat(null==M?void 0:M.num_id,"/available-shops"))},children:_("popular_category.see_all")})]})]})}},8368:function(e,t,l){l.d(t,{Z:function(){return i}});var a=l(1527),n=l(3944),o=l(8810),s=l(2349),i=e=>{let{icon:t,title:l,text:i,btnText:r,mainHeight:d,navigateLink:c,className:p="",height:x}=e,u=(0,s.useRouter)();return(0,a.jsx)("div",{className:"flex items-center justify-center container mx-auto ".concat(p),style:{height:x||"calc(100vh - ".concat(d,"px)")},children:(0,a.jsxs)("div",{className:"max-w-[389px] text-center flex flex-col gap-[24px] items-center",children:[(0,a.jsx)("div",{className:"w-[72px] h-[72px] bg-red-secondary rounded-[20px] flex items-center justify-center stroke-red-primary",children:(0,a.jsx)(n.Z,{iconName:t,className:"w-[32px] h-[32px]"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-[12px] text-center",children:[(0,a.jsx)("p",{className:"text-dark font-[700] text-[20px]",children:l}),(0,a.jsx)("p",{className:"text-gray text-[16px] font-[400] leading-[150%]",children:i})]}),(0,a.jsx)(o.default,{type:"button",buttonType:"danger","aria-label":r,className:"min-w-[280px] rounded-[12px] text-[14px] font-[600]",onClick:()=>u.push(c),children:r})]})})}},6450:function(e,t,l){l.d(t,{Z:function(){return s}});var a=l(1527),n=l(852),o=l(8368),s=e=>{let{status:t,children:l,noData:s,loading:i,className:r="min-h-[100vh]"}=e;return(0,a.jsx)("div",{className:"".concat(r),children:"nodata"===t?(0,a.jsx)(o.Z,{...s}):i?(0,a.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,a.jsx)(n.default,{type:"dots"})}):l})}},34:function(e,t,l){l.r(t),l.d(t,{default:function(){return c}});var a=l(1527),n=l(1043),o=l(959),s=l(4402),i=l(5851),r=l(7961),d=l(6017),c=e=>{let{open:t,setOpen:l,setAksModal:c}=e,{i18n:p,t:x}=(0,s.$G)(),[u,m]=(0,o.useState)([]),{location:h,setLocation:v}=(0,n.Dj)();return(0,o.useEffect)(()=>{let e=async()=>{let e=await r.I.getRegions();m(null==e?void 0:e.getlistregions)};e()},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.default,{open:t,setOpen:l,title:x("t.choose_region"),className:"min-w-[300px] mobileM:min-w-[350px] mobile:min-w-[450px]",loading:!(null==u?void 0:u.length),children:(0,a.jsx)("form",{className:"flex flex-col gap-[16px] h-[503px] pr-[5px] overflow-y-auto simple__scroll",children:null==u?void 0:u.map((e,t)=>{var n,o;return(0,a.jsx)(d.Z,{type:"radio3",name:"lang",value:null==e?void 0:null===(n=e.name)||void 0===n?void 0:n[p.language],checked:(null==h?void 0:h.id)===(null==e?void 0:e.id),onChange:()=>{window.localStorage.setItem("location",JSON.stringify(e)),window.localStorage.setItem("ask","1"),null==v||v(e),c(!1),l(!1)},children:null==e?void 0:null===(o=e.name)||void 0===o?void 0:o[p.language]},t)})})})})}},6502:function(e,t,l){var a=l(959);t.Z=function(e,t){let[l,n]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let l=setTimeout(()=>n(e),t||500);return()=>{clearTimeout(l)}},[e,t]),l}}}]);